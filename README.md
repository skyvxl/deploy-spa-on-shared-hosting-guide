# Как развернуть SPA-приложение рядом с WordPress на shared-хостинге

Это руководство описывает простой и эффективный способ развертывания одностраничного приложения (SPA), созданного на React, Vue, Angular или Svelte, в подпапке на том же shared-хостинге, где уже работает сайт на WordPress.

## Проблема

Часто возникает задача добавить к существующему сайту на WordPress (например, `vashdomen.ru`) современный интерактивный раздел, разработанный как SPA (например, калькулятор, портфолио, личный кабинет). При этом хочется, чтобы этот раздел был доступен по адресу `vashdomen.ru/react-app/`.

Стандартные решения, такие как Headless CMS, могут быть сложными в настройке и избыточными для такой задачи. Проблема же прямого подхода в том, что веб-сервер (обычно Apache), настроенный для WordPress, перехватывает все запросы и пытается найти соответствующую страницу внутри WP. Если же пользователь напрямую зайдет по ссылке `vashdomen.ru/react-app/some-page`, сервер не найдет такой физический файл и вернет ошибку 404, так как маршрутизация в SPA обрабатывается на стороне клиента (в браузере).

Представленное здесь решение не требует сложных манипуляций с сервером или WordPress API. Оно использует стандартные возможности Apache и настройки сборки SPA-проекта.

## Решение

Суть метода заключается в трех шагах:
1.  **Настроить SPA** так, чтобы оно знало, что будет работать в подпапке.
2.  **Загрузить собранное приложение** в эту подпапку на хостинге.
3.  **Настроить Apache** с помощью файла `.htaccess`, чтобы он корректно обрабатывал запросы к приложению, не мешая работе основного сайта на WordPress.

### Шаг 1: Конфигурация проекта SPA

Перед сборкой приложения необходимо указать базовый путь (public path), который будет использоваться для всех ссылок на ресурсы (скрипты, стили, изображения).

1.  **Создайте папку на хостинге.** Через файловый менеджер в панели управления хостингом зайдите в корневую директорию вашего сайта (`public_html` или `www`) и создайте там папку для вашего SPA. Например, `react-app`.

2.  **Укажите базовый роут в конфигурации сборщика.**
    *   **Vite (`vite.config.js` или `vite.config.ts`):**
        ```javascript
        import { defineConfig } from 'vite';

        export default defineConfig({
          // Указываем, что все пути к ресурсам должны начинаться с /react-app/
          base: '/react-app/',
          // ...остальные настройки
        });
        ```
    *   **Angular ( `angular.json` ):**
        ```json5
        {
          // ...
          "build": {
            "options": {
              "baseHref": "/angular-app/"
              // ...
            },
            // ...
          }
        }
        ```

### Шаг 2: Сборка и загрузка файлов

1.  **Соберите проект.** Запустите команду сборки в вашем терминале:
    ```bash
    npm run build
    ```
2.  **Загрузите файлы на хостинг.** Содержимое папки `dist` (или `build`) скопируйте в созданную ранее директорию `public_html/react-app`.

### Шаг 3: Настройка веб-сервера (`.htaccess`)

Это ключевой шаг. Нужно создать в папке с вашим приложением (`public_html/react-app/`) файл `.htaccess`. Он даст Apache инструкции, как обрабатывать запросы, поступающие по адресу `vashdomen.ru/react-app/*`.

Создайте файл `.htaccess` со следующим содержимым:

```apache
<IfModule mod_rewrite.c>
  # Отключаем опцию MultiViews, чтобы избежать конфликтов с файлами с похожими именами.
  Options -MultiViews

  # Включаем механизм преобразования URL
  RewriteEngine On

  # Устанавливаем базовый URL для правил. Он должен совпадать с именем папки.
  RewriteBase /react-app/

  # Не применять дальнейшие правила для файла index.html
  RewriteRule ^index\.html$ - [L]

  # Условие: если запрашиваемый URL не является существующим файлом...
  RewriteCond %{REQUEST_FILENAME} !-f
  # ...и не является существующей папкой
  RewriteCond %{REQUEST_FILENAME} !-d

  # ...то перенаправить любой запрос на index.html для обработки роутером SPA.
  RewriteRule . index.html [L]
</IfModule>
```

**Важное замечание:** Этот файл `.htaccess` должен находиться именно **внутри папки `react-app`**, а не в корне сайта. Это гарантирует, что его правила будут применяться только к вашему приложению и не затронут основной сайт на WordPress.

Теперь ваше SPA-приложение доступно по адресу `vashdomen.ru/react-app/`, и все внутренние ссылки, а также прямые заходы на страницы типа `vashdomen.ru/react-app/some-page` будут работать корректно.
